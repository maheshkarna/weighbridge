<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta content="default-src * data: blob:; style-src * 'unsafe-inline' cdvfile://*; script-src * 'unsafe-inline' 'unsafe-eval' 'unsafe-hashes' cdvfile://* blob:; img-src * data: 'unsafe-inline'; connect-src * 'unsafe-inline';
                frame-src *;" http-equiv="Content-Security-Policy">
    <meta http-equiv="Content-Security-Policy"
    content="default-src 'self' data: blob:; script-src 'self' 'unsafe-eval' 'unsafe-inline' blob: ; style-src 'self' 'unsafe-eval' 'unsafe-inline' ;">
    
  <!--  <title>Hello World!</title>  <link rel="stylesheet" href="./lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./lib/videojs/video-js.css"> -->
  <link rel="apple-touch-icon" sizes="76x76" href="./css/assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="./css/assets/img/favicon.png">
  <title>
   SPONDIAS INDIA WEIGHBRIDGES 
  </title>
  <!--   Fonts and icons     -->
  <link href="./css/assets/js/family.css" rel="stylesheet" />
  
  <!-- Nucleo Icons -->
  <link href="./css/assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="./css/assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->

  
  <link href="./css/assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link id="pagestyle" href="./css/assets/css/soft-ui-dashboard.css?v=1.0.7" rel="stylesheet" />
  <link href="./lib/fontawesome/css/all.css" rel="stylesheet">
  <link href="./lib/fontawesome/css/fontawesome.css" rel="stylesheet">
  <link href="./lib/fontawesome/css/brands.css" rel="stylesheet">
  <link href="./lib/fontawesome/css/solid.css" rel="stylesheet">
  <style type="text/css">
   

    @media (min-width: 1200px){
  .sidenav.fixed-start~.main-content {
      margin-left: 5.125rem;
      margin-right: 5rem;
  }
  }
  .mt-n6 {
    margin-top: -5rem !important;
     }
    .mx-4 {
    margin-right: 0 !important;
    margin-left: 0 !important;
    } 
    #passIcon{
    margin-left: 305px;
    font-size: 21px;
    }
   
  </style>
</head>    
<body class="g-sidenav-show bg-gray-100">
    <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3 " id="sidenav-main" style="display: none">
    </aside>
    <div class="main-content position-relative bg-gray-100 max-height-vh-100 h-100">
      <!-- Navbar -->
      <nav class="navbar navbar-main navbar-expand-lg bg-transparent shadow-none position-absolute px-4 w-100 z-index-2">
        <div class="container-fluid py-1">
          
        </div>
      </nav>
      <!-- End Navbar -->

      <div class="modal fade xl" id="regkeyPop">
        <div class="modal-dialog shadow-lg p-3 mb-5 bg-white rounded">
          <div class="modal-content sub-bg">
            <div class="modal-header subs-header">
            </div>
            <div class="modal-body">
              <div class="text-center ">
                <h4 class="shadow p-3 mb-3">Enter Registrato Key</h4>
                <input type="hidden" name="PrintSlipNo" id="PrintSlipNo">
                <div class="row">
                  <div class="col-11 col-xl-11">
                    <div class="mb-2">
                      <input type="text" class="form-control" readonly aria-label="Name" aria-describedby="email-addon" id="localMachinId" name="localMachinId" title="Machine Id ">
                    </div>
                   </div> 
                   <div class="col-1 col-xl-1">
                    <div class="mb-2">
                      <i style="font-size: 30px; margin-top: 5px; margin-left: -20px;" onclick="copyText()" class="fa-solid fa-copy"></i>
                      <!-- <button class="btn btn-primary">copy</button> -->
                    </div>
                   </div>

                  <div class="col-12 col-xl-12">
                    <div class="mb-2">
                      <input type="text" class="form-control" placeholder="Past Your Registration Key"  aria-label="Name" aria-describedby="email-addon" id="registaion_key" name="registaion_key" title="Registration Key">
                      <input type="hidden" id="hdnOrgMechId" name="hdnOrgMechId">
                      <input type="hidden" id="hdnOrgEndDate" name="hdnOrgEndDate">


                      <label id="registaionKeyError" class="text-danger"></label>
                     </div>
                    </div>
                   </div>
              </div>
              <div class="row">
                <div class="col-md-2">  
                </div> 
                <div class="col-md-8">  <a class="btn btn-success btn-sm mb-0 me-3" style="float:right;"  id="register" onclick="app.Registration.SaveData()" href="#">Register</a>  
                  <!-- <a href="#" class="btn btn-danger text-center" onclick="getKey()" >Get Key</a>--> </div> 
                <div class="col-md-2"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    
      <div class="container-fluid">
        <div class="page-header min-height-100 border-radius-xl mt-4" >
          <span class="mask bg-gradient-primary opacity-6"></span>
        </div>
        <div class="card card-body blur shadow-blur mx-4 mt-n6 overflow-hidden">
          <div class="row gx-4">
            <div class="col-auto">
              <div class="avatar avatar-xl position-relative">
                <img src="./logo/spondias.png" alt="profile_image" class="w-100 border-radius-lg shadow-sm">
              </div>
            </div>
            <div class="col-auto my-auto">
              <div class="h-100">
                <h5 class="mb-1">
                 SPONDIAS INDIA WEIGHBRIDGES
                </h5>
                <!-- <p class="mb-0 font-weight-bold text-sm">
                 Kakinada
                </p> -->
              </div>
            </div>
            <div class="col-lg-4 col-md-6 my-sm-auto ms-sm-auto me-sm-0 mx-auto mt-3">
              <div class="nav-wrapper position-relative end-0">
                <ul class="nav nav-pills nav-fill p-1 bg-transparent" role="tablist">
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="container-fluid py-4" id="registration_Form">
        <div class="row">
            <div class="col-12 col-xl-12">
              <div class="card h-100">
                <div class="card-header pb-0 p-3">
                  <h6 class="mb-0">Registration</h6>
                </div>
                <div class="card-body">
                    <form role="form text-left">
                       <div class="row">
                        <div class="col-4 col-xl-4">
                          <div class="mb-2">
                            <label>Company Code</label>
                            <input type="text" class="form-control" readonly="true" placeholder="Company Name" aria-label="Name" aria-describedby="email-addon" name="cc" id="cc" title="Company Code">
                          <label id="ccError" class="text-danger"></label>
                          </div>
                         </div>

                         
                         <div class="col-4 col-xl-4">
                          <div class="mb-2">
                            <label>WBS</label>
                            <input type="text" class="form-control" placeholder="Weight Bridges" aria-label="Name" aria-describedby="email-addon" id="wbs" name="wbs" title="Weight Bridge">
                            <input type="hidden" class="form-control" placeholder="Weight Bridges" aria-label="Name" aria-describedby="email-addon" id="hiddenId" name="hiddenId" title="Weight Bridge">
                            <label id="wbsError" class="text-danger"></label>
                          </div>
                         </div>

                           <div class="col-4 col-xl-4">
                            <div class="mb-2">
                              <label>Company Name</label>
                              <input type="text" class="form-control" placeholder="Company Name" aria-label="Name" aria-describedby="email-addon" name="company_name" id="company_name" title="Company Name">
                            <label id="companyNameError" class="text-danger"></label>
                            </div>
                           </div>
                        
                                 
                           <div class="col-4 col-xl-4">
                            <div class="mb-2">
                              <label>Email</label>
                              <input type="email" class="form-control" placeholder="Email" aria-label="Name" aria-describedby="email-addon" id="email" name="email" title="Email">
                              <label id="emailError" class="text-danger"></label>
                            </div>
                           </div>

                            <div class="col-4 col-xl-4">
                            <div class="mb-2">
                              <label>Phone Number</label>
                              <input type="text" class="form-control" placeholder="Phone Number" aria-label="Name" aria-describedby="email-addon" id="phone" name="phone" title="Phone Number">
                              <label id="phoneError" class="text-danger"></label>
                            </div>
                           </div>

                           <div class="col-4 col-xl-4">
                            <div class="mb-2">
                              <label>Username</label>
                              <input type="text" class="form-control" placeholder="Username" aria-label="Name" aria-describedby="email-addon" id="AdmUsername" name="AdmUsername" title="Username">
                              <label id="UsernameErr" class="text-danger"></label>
                            </div>
                           </div>

                           <!-- <div class="col-4 col-xl-4">
                            <div class="mb-2">
                              <label>Password</label>
                              <input type="text" class="form-control" placeholder="Password" aria-label="Name" aria-describedby="email-addon" id="AdmPassword" name="AdmPassword" title="Password">
                              <label id="passwordErr" class="text-danger"></label>
                            </div>
                           </div> -->
                                      
                          <div class="col-4 col-xl-4">
                            <div class="mb-2">
                              <label>Password</label>
                              <div class="input-group">
                                  <input type="password" class="form-control" placeholder="Password" aria-label="Name" aria-describedby="email-addon" id="AdmPassword" name="AdmPassword" title="Password">
                                  <div class="input-group-text" id="passIcon" onclick="togglePassword()">
                                  <i class="fa-solid fa-eye"></i>
                                </div>
                              </div>
                              <label id="passwordErr" class="text-danger"></label>
                            </div>
                          </div>

                           
                           <div class="col-4 col-xl-4">
                            <div class="mb-2">
                              <label>Address</label>
                              <textarea class="form-control" placeholder="Address" name="address" id="address"></textarea>
                              <label id="addressError" class="text-danger"></label>
                            </div>
                           </div>

                           <!-- <div class="col-4 col-xl-4">
                            <div class="mb-2">
                              <label>Registration Key</label>
                              <input type="text" class="form-control" placeholder="Registration Key"  aria-label="Name" aria-describedby="email-addon" id="registaion_key" name="registaion_key" title="Registration Key">
                              <label id="registaionKeyError" class="text-danger"></label>
                            </div>
                           </div> -->
                       </div>
                    </form>
                   
                     <a class="btn btn-dark btn-sm mb-0 me-3" style="float:right;"  id="register" onclick="openPop()" href="#">Next</a>               
                    </div>
                  </div>
              </div>
            </div>
        </div>

        <div class="container-fluid py-4" id="confirm_regist">
        <div class="row">
            <div class="col-12 col-xl-12">
              <div class="card h-100">
      
                <div class="card-body">
                  <section id="weighbridge">
                    <div class="container">
                      <h2>SPONDIAS INDIA WEIGHBRIDGES</h2>
                      <p>A weighbridge is a heavy-duty platform used for weighing vehicles and their contents. It plays a crucial role in various industries such as logistics, transportation, construction, and agriculture.</p>
                      <p>Key features of our weighbridge:</p>
                      <ul>
                        <li>Highly accurate weighing measurements</li>
                        <li>Robust construction for heavy loads</li>
                        <li>Durable and weather-resistant materials</li>
                        <li>Multiple sizes and weight capacities available</li>
                        <li>Easy to install and maintain</li>
                        <li>Integrated software for weight data management</li>
                        <li>Efficient traffic management and control</li>
                      </ul>
                      <p>Our weighbridge solutions are designed to meet the specific needs of our clients, ensuring reliable and precise weighing results for their operations. Contact us today to learn more about our weighbridge products and services.</p>
                      
                      <!-- Registration Button -->
                      <div class="d-flex justify-content-center">
                        <button class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#registrationModal">Register</button>
                      </div>
                    </div>
                  </section>
                  
                  <!-- Registration Modal -->
                  <div class="modal fade" id="registrationModal" tabindex="-1" aria-labelledby="registrationModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="registrationModalLabel">Select The Type Of Rgistration</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body"> <div class="d-flex justify-content-center"></div>
                          <button class="btn btn-dark" onclick="newReg()" data-bs-dismiss="modal">New Company Registration</button>
                          <button class="btn btn-dark"  data-bs-toggle="modal" data-bs-target="#addWbsLoginModel">Add Weighbridge System</button>
                       </div>
                      </div>
                      </div>
                    </div>
                    <!-- Add WBS Machine popup -->
                  <div class="modal fade" id="addWbsLoginModel" tabindex="-1" aria-labelledby="addWbsLoginModelLabel" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="addWbsLoginModelLabel">Login</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body"> 
                        <div class="row d-flex justify-content-center px-5">
                          <div class="col-md-12 m-1"><label>CC</label>
                            <input type="text" class="form-control" id="validCC" placeholder="Please Enter Your CC">
                          </div>
                          <div class="col-md-12 m-1">
                            <label>Username</label>
                            <input type="text" class="form-control" id="username" placeholder="Please Enter Your Username">
                          </div>
                          <div class="col-md-12 m-1">
                            <label>Password</label>
                            <input type="text" class="form-control" id="password" placeholder="please Enter Your Password">
                          </div>
                        </div>
                       </div>
                       <div class="modal-footer justify-content-space-between">
                          <button class="btn btn-dark" onclick="ccLogChecheck()"> Login </button>
                      </div>
                    </div>
                    </div>
                  </div>
                  <!-- End Add WBS Machine popup -->
                </div>
              </div>
            </div>
            </div>
          </div>
          </div>


        <footer class="footer pt-3">
          <div class="container-fluid">
            <div class="row align-items-center justify-content-lg-between">
              <div class="col-lg-12 mb-lg-0 mb-4">
                <div class="copyright text-center text-sm text-muted text-lg-start">
                  © <script>
                    document.write(new Date().getFullYear())
                  </script>,
                  made with 
                  <a href="#" class="font-weight-bold" target="_blank">Spondias Private Limited</a>
  
                </div>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>
    <div class="fixed-plugin">
      <div class="card shadow-lg ">
        <div class="card-header pb-0 pt-3 ">
          <div class="float-start">
            <h5 class="mt-3 mb-0">Soft UI Configurator</h5>
            <p>See our dashboard options.</p>
          </div>
          <div class="float-end mt-4">
            <button class="btn btn-link text-dark p-0 fixed-plugin-close-button">
               <i class="fa fa-close"></i>
            </button>
          </div>
          <!-- End Toggle Button -->
        </div>
        <hr class="horizontal dark my-1">
        <div class="card-body pt-sm-3 pt-0">
          <!-- Sidebar Backgrounds -->
          <div>
            <h6 class="mb-0">Sidebar Colors</h6>
          </div>
          <a href="javascript:void(0)" class="switch-trigger background-color">
            <div class="badge-colors my-2 text-start">
              <span class="badge filter bg-gradient-primary active" data-color="primary" onclick="sidebarColor(this)"></span>
              <span class="badge filter bg-gradient-dark" data-color="dark" onclick="sidebarColor(this)"></span>
              <span class="badge filter bg-gradient-info" data-color="info" onclick="sidebarColor(this)"></span>
              <span class="badge filter bg-gradient-success" data-color="success" onclick="sidebarColor(this)"></span>
              <span class="badge filter bg-gradient-warning" data-color="warning" onclick="sidebarColor(this)"></span>
              <span class="badge filter bg-gradient-danger" data-color="danger" onclick="sidebarColor(this)"></span>
            </div>
          </a>
          <!-- Sidenav Type -->
          <div class="mt-3">
            <h6 class="mb-0">Sidenav Type</h6>
            <p class="text-sm">Choose between 2 different sidenav types.</p>
          </div>
          <div class="d-flex">
            <button class="btn bg-gradient-primary w-100 px-3 mb-2 active" data-class="bg-transparent" onclick="sidebarType(this)">Transparent</button>
            <button class="btn bg-gradient-primary w-100 px-3 mb-2 ms-2" data-class="bg-white" onclick="sidebarType(this)">White</button>
          </div>
          <p class="text-sm d-xl-none d-block mt-2">You can change the sidenav type just on desktop view.</p>
          <!-- Navbar Fixed -->
          <div class="mt-3">
            <h6 class="mb-0">Navbar Fixed</h6>
          </div>
          <div class="form-check form-switch ps-0">
            <input class="form-check-input mt-1 ms-auto" type="checkbox" id="navbarFixed" onclick="navbarFixed(this)">
          </div>
          <hr class="horizontal dark my-sm-4">
          <a class="btn bg-gradient-dark w-100" href="https://www.creative-tim.com/product/soft-ui-dashboard">Free Download</a>
          <a class="btn btn-outline-dark w-100" href="https://www.creative-tim.com/learning-lab/bootstrap/license/soft-ui-dashboard">View documentation</a>
          <div class="w-100 text-center">
            <a class="github-button" href="https://github.com/creativetimofficial/soft-ui-dashboard" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star creativetimofficial/soft-ui-dashboard on GitHub">Star</a>
            <h6 class="mt-3">Thank you for sharing!</h6>
            <a href="https://twitter.com/intent/tweet?text=Check%20Soft%20UI%20Dashboard%20made%20by%20%40CreativeTim%20%23webdesign%20%23dashboard%20%23bootstrap5&amp;url=https%3A%2F%2Fwww.creative-tim.com%2Fproduct%2Fsoft-ui-dashboard" class="btn btn-dark mb-0 me-2" target="_blank">
              <i class="fab fa-twitter me-1" aria-hidden="true"></i> Tweet
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.creative-tim.com/product/soft-ui-dashboard" class="btn btn-dark mb-0 me-2" target="_blank">
              <i class="fab fa-facebook-square me-1" aria-hidden="true"></i> Share
            </a>
          </div>
        </div>
      </div>
    </div>
  </body>

  <script src="./lib/jquery/jquery-3.6.3.min.js"></script>
  <link href="./css/assets/css/toastr.css" rel="stylesheet"/>
  <script src="./css/assets/js/toastr.js"></script>
  <script src="./css/assets/js/sweetalert.js"></script>
  <!--   <script src="./lib/bootstrap/js/bootstrap.min.js"></script> -->
  <script src="./css/assets/js/core/popper.min.js"></script>
  <script src="./css/assets/js/core/bootstrap.min.js"></script>
  <script src="./css/assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="./css/assets/js/plugins/smooth-scrollbar.min.js"></script>
  <script src="./css/assets/js/soft-ui-dashboard.min.js?v=1.0.7"></script>
  <script src="./lib/videojs/video.min.js"></script>
  <script src="./css/assets/js/42d5adcbca.js" crossorigin="anonymous"></script>
  <script src="./js/database.js"></script>
  
  <script src="./js/general.js"></script>
  <script src="./js/db/dateCheckRepo.js"></script>

  <script src="./js/db/customerTables.js"></script>
  <script src="./js/db/registrationRepo.js"></script>
  <script src="./js/registration.js"></script> 

  <script>
    $(document).ready(function(){
        $('#registration_Form').addClass('d-none');
      getKey();
      getCC();
    });

    function newReg(){
      $('#registration_Form').toggleClass('d-none');
      $('#confirm_regist').addClass('d-none');
    }

    function ccLogChecheck(){
    let validCC = $('#validCC').val();
    let username = $('#username').val();
    let password = $('#password').val();
      if(validCC !="" && username !="" && password !=""){
        $.ajax({
        url: "http://localhost:8686/checkCClogins", 
        type: "GET",
        cache: false,
        data:{validCC:validCC, username: username, password: password},
        success: function (data){
          if(data.success){
            toastr.success('login Success...', '', {timeOut: 1000});  
            $('#addWbsLoginModel').modal('hide');
            $('#registration_Form').toggleClass('d-none');
            $('#confirm_regist').addClass('d-none');
                  
            $('#cc').val(data.data[0].cc);
            $('#company_name').val(data.data[0].company_name);
            $('#address').val(data.data[0].address);
            $('#email').val(data.data[0].email);
            $('#phone').val(data.data[0].phone); 
            $('#AdmUsername').val(data.data[0].ad_username);  
            $('#AdmPassword').val(data.data[0].ad_password);
            
            function incrementString(str) {
              return str.replace(/(\d+)$/, (match, number) => {
              let incrementedNumber = parseInt(number, 10) + 1;
              return incrementedNumber.toString().padStart(number.length, '0');
              });
            }
            let incrementedString = incrementString(data.data[1].maxWBS);
            $('#wbs').val(incrementedString);

           //////////////////////////////////////////
            $('#cc').prop('readonly', true);
            $('#wbs').prop('readonly', true);
            $('#company_name').prop('readonly', true);
            $('#email').prop('readonly', true);
            $('#phone').prop('readonly', true);
            $('#AdmUsername').prop('readonly', true);
            $('#AdmPassword').prop('readonly', true);
            $('#address').prop('readonly', true);

          }else{
            toastr.error('Invalid Logins', '', {timeOut: 1000});         
           }
        },
       });

      }
    }

    function getCC(){
      $.ajax({
        url: "http://localhost:8686/getCC_API", 
        type: "GET",
        cache: false,
        success: function (cc) {
          $('#cc').val(cc);
          $('#wbs').val('WBS01');
        },
      });
    }

   function openPop(){
    $('#regkeyPop').modal('show');
   }
   
   function getKey(){ 
      $.ajax({
        url: "http://localhost:8686/getMechineId", 
        type: "GET",
        cache: false,
        success: function (OrgMachineId) {
          encMachineId(OrgMachineId)
        },
      });
   }

   function copyText() {
      var textBox = document.getElementById("localMachinId");
      textBox.select();
      document.execCommand("copy");
    }

    function encMachineId(OrgMachineId){
      $.ajax({
          url: "http://localhost:8686/encryptString",
          type: "GET",
          cache: false,
          data: {'regKey': OrgMachineId,'skey':'machineId'},
          success: function (encMachineId) {
          $('#localMachinId').val(encMachineId);
          }
        })
      }

function togglePassword() {
    var passwordInput = document.getElementById('AdmPassword');
    var showPasswordBtn = document.getElementById('showPasswordBtn');

    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      showPasswordBtn.innerHTML = '<i class="fa-solid fa-eye-slash"></i>';
    } else {
      passwordInput.type = 'password';
      showPasswordBtn.innerHTML = '<i class="fa-solid fa-eye"></i>';
    }
}
  </script>
 
</html> 